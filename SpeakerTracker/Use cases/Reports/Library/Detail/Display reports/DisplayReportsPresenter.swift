//
//  DisplayReportsPresenter.swift
//  SpeakerTracker
//
//  Created by Warwick McNaughton on 22/09/18.
//  Copyright (c) 2018 Warwick McNaughton. All rights reserved.
//
//  This file was generated by the Clean Swift Xcode Templates so
//  you can apply clean architecture to your iOS and Mac projects,
//  see http://clean-swift.com
//

import UIKit

protocol DisplayReportsPresentationLogic {
    func presentReports(response: DisplayReports.Reports.Response)
}

class DisplayReportsPresenter: DisplayReportsPresentationLogic {
    weak var viewController: DisplayReportsDisplayLogic?

    // MARK: VIP

    func presentReports(response: DisplayReports.Reports.Response) {
        var thumbFields = [ThumbFields]()
        for event in response.events! {
            var thumb = ThumbFields()
            let formatter = DateFormatter()
            formatter.dateStyle = .long
            formatter.timeStyle = .none
            let dateStrg = formatter.string(from: event.date!)
            formatter.dateStyle = .none
            formatter.timeStyle = .short
            let timeStrg = formatter.string(from: event.date!)
            thumb.time = timeStrg
            thumb.date = dateStrg
            thumbFields.append(thumb)
        }
        
        let viewModel = DisplayReports.Reports.ViewModel(thumbFields:thumbFields)
        viewController?.displayReports(viewModel: viewModel)
    }
}
